// SONIC ABORT V0.0.1
// MARCUS BEECHER
// https://github.com/dunkacinno/Script

NOTIFY("ABORT PROGRAM INITIATED").

IF PERIAPSIS > 60000 {
	NOTIFY("ORBIT DETECTED: DEORBITING.").
	
	LOCK STEERING TO RETROGRADE. 
	WAIT 20. 
	LOCK THROTTLE TO 1. 
	
	WAIT UNTIL PERIAPSIS < 35000 OR SHIP:LIQUIDFUEL < 0.1.
	}
	
NOTIFY("ORBITAL DECAY ACHIEVED").
LOCK THROTTLE TO 0.
SET SHIP:CONTROL:PILOTMAINTHROTTLE TO 0. 

WAIT 1. 
NOTIFY("ABORTING ALL STAGES").
UNTIL FALSE {
	STAGE.
	}